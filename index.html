<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Satisfacción AVAPACE 2025</title>
    
    <!-- Dependencias para React, Recharts y Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script>
        // Parche necesario para que Recharts encuentre PropTypes globalmente
        window.PropTypes = window.PropTypes || window.PropTypes;
    </script>
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.5;
        }

        .premium-card {
            background: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .bg-avapace-gradient {
            background: linear-gradient(135deg, #0069b4 0%, #004e89 100%);
        }

        .tab-active {
            color: #0069b4;
            border-bottom: 3px solid #0069b4;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white !important; }
            .premium-card { box-shadow: none !important; border: 1px solid #e2e8f0 !important; }
            .max-w-7xl { max-width: 100% !important; }
            img { max-width: 100%; height: auto; }
            .print-bg-blue { background-color: #0069b4 !important; color: white !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .break-inside-avoid { break-inside: avoid; page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;
        const { 
            BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer 
        } = window.Recharts || {};

        // Iconografía SVG
        const IconHeart = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>;
        const IconUsers = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconTrending = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>;
        const IconMessage = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>;
        const IconAward = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>;
        const IconCheck = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>;
        const IconAlert = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>;
        const IconPrinter = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>;
        const IconTarget = () => <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>;
        const IconZap = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>;
        const IconStar = () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
        const IconUpload = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>;
        const IconLock = () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="7 11V7a5 5 0 0 1 10 0v4"/></svg>;

        const DATA = {
            stats: { nps: 62, avg: 4.15, responses: 101 },
            blocks: [
                { id: 1, title: "1. Ambiente Laboral", desc: "Clima de colaboración, respeto y agilidad operativa.", avg: 4.28, strengths: ["El respeto entre niveles es excelente.", "Fuerte sentimiento de apoyo mutuo."], improvements: ["Agilizar la burocracia administrativa."], data: [{ name: "Respeto", d1: 0, d2: 2, d3: 8, d4: 20, d5: 70 }, { name: "Apoyo", d1: 2, d2: 5, d3: 10, d4: 34, d5: 49 }, { name: "Agilidad", d1: 15, d2: 25, d3: 30, d4: 20, d5: 10 }] },
                { id: 2, title: "2. Condiciones Físicas", desc: "Limpieza, mantenimiento y materiales de trabajo.", avg: 3.92, strengths: ["Niveles de limpieza muy altos.", "Seguridad y uso de EPIs correcto."], improvements: ["Renovación de equipos tecnológicos."], data: [{ name: "Limpieza", d1: 0, d2: 4, d3: 10, d4: 50, d5: 36 }, { name: "Comodidad", d1: 5, d2: 12, d3: 20, d4: 45, d5: 18 }, { name: "Materiales", d1: 8, d2: 15, d3: 25, d4: 35, d5: 17 }] },
                { id: 3, title: "3. Relación con Responsables", desc: "Feedback y apoyo del liderazgo directo.", avg: 4.31, strengths: ["Cercanía y trato humano excelente.", "Expectativas claras."], improvements: ["Feedback formal frecuente."], data: [{ name: "Apoyo", d1: 0, d2: 3, d3: 12, d4: 30, d5: 55 }, { name: "Feedback", d1: 3, d2: 7, d3: 15, d4: 41, d5: 34 }] },
                { id: 4, title: "4. Reconocimiento y Desarrollo", desc: "Valoración del talento y formación.", avg: 3.85, strengths: ["Planes de formación técnica.", "Reconocimiento público de logros."], improvements: ["Valoración individualizada."], data: [{ name: "Formación", d1: 2, d2: 10, d3: 22, d4: 40, d5: 26 }, { name: "Valoración", d1: 5, d2: 12, d3: 22, d4: 38, d5: 23 }] },
                { id: 5, title: "5. Bienestar y Equilibrio", desc: "Gestión del estrés y motivación diaria.", avg: 4.08, strengths: ["Alta motivación intrínseca.", "Compromiso con el usuario."], improvements: ["Prevención del desgaste emocional."], data: [{ name: "Motivación", d1: 2, d2: 4, d3: 18, d4: 40, d5: 36 }, { name: "Estrés", d1: 10, d2: 18, d3: 32, d4: 28, d5: 12 }] },
                { id: 6, title: "6. Comunicación Interna", desc: "Transparencia y flujo de información.", avg: 3.65, strengths: ["Objetivos claras.", "Canales oficiales establecidos."], improvements: ["Rapidez informativa entre centros."], data: [{ name: "Procedimientos", d1: 6, d2: 15, d3: 35, d4: 30, d5: 14 }, { name: "Información", d1: 10, d2: 20, d3: 35, d4: 25, d5: 10 }] },
                { id: 7, title: "7. Conciliación e Igualdad", desc: "Respeto a la vida personal y equidad.", avg: 4.38, strengths: ["Igualdad real percibida.", "Respeto a la vida familiar."], improvements: ["Antelación en los turnos."], data: [{ name: "Igualdad", d1: 0, d2: 2, d3: 12, d4: 30, d5: 56 }, { name: "Flexibilidad", d1: 0, d2: 5, d3: 12, d4: 45, d5: 38 }] },
                { id: 8, title: "8. Propósito y Misión", desc: "Alineación con los valores sociales de AVAPACE.", avg: 4.82, strengths: ["Orgullo masivo de pertenencia.", "Identificación total con la Misión."], improvements: ["Liderar desde el propósito."], data: [{ name: "Misión", d1: 0, d2: 0, d3: 2, d4: 15, d5: 83 }, { name: "Orgullo", d1: 0, d2: 2, d3: 5, d4: 30, d5: 63 }] }
            ],
            qualitative: [
                { 
                    id: "Q1", title: "Operatividad y Eficiencia", 
                    summary: "La burocracia en papel es la mayor queja percibida; el equipo siente que resta tiempo valioso al cuidado directo.",
                    actions: ["Digitalización integral (32 personas)", "Renovación de tablets (18 personas)", "Optimización WiFi (12 personas)"],
                    quotes: [
                        "Eliminar el papel para devolver tiempo a la atención directa.",
                        "PCs y tablets van muy lentos en los centros; necesitamos renovación."
                    ]
                },
                { 
                    id: "Q2", title: "Bienestar y Cultura", 
                    summary: "Se requiere un refuerzo del apoyo emocional y más espacios de cohesión ante la carga emocional diaria.",
                    actions: ["Grupos de descarga (40 personas)", "Encuentros lúdicos (25 personas)", "Reconocimientos (15 personas)"],
                    quotes: [
                        "Crear grupos de apoyo para gestionar la alta carga emocional.",
                        "Organizar más encuentros informales presenciales entre centros."
                    ]
                }
            ],
            allComments: [
                "Eliminar el papel para devolver tiempo a la atención directa.",
                "Siento que somos una gran familia y eso se nota en el trato al usuario.",
                "Faltan recursos tecnológicos, los PCs son muy lentos en muchos centros.",
                "La comunicación entre centros es mejorable, a veces nos falta información.",
                "Me siento muy orgullosa de pertenecer a AVAPACE y de la labor que hacemos.",
                "Cercanía y trato humano excelente por parte de mi responsable directo.",
                "Eliminar el papel definitivamente, digitalizar registros ayudaría mucho.",
                "Se debería fomentar más la cohesión entre los distintos centros de la organización.",
                "El respeto entre compañeros es la mayor fortaleza que tenemos ahora mismo.",
                "Necesitamos espacios para poder descargar emocionalmente tras situaciones críticas.",
                "Conciliación familiar muy respetada, me siento apoyada por la entidad.",
                "Saber que mi trabajo tiene un propósito social me motiva cada mañana.",
                "Más formación técnica específica para el personal de atención directa.",
                "El apoyo mutuo entre compañeros hace que el día a día sea más llevadero.",
                "Agilizar los trámites administrativos con los centros territoriales.",
                "Optimizar el tiempo de los registros para que no quiten tiempo de calidad.",
                "Me gusta la libertad que tengo para proponer actividades con los usuarios.",
                "Las instalaciones de algunos centros necesitan una reforma urgente.",
                "Siento que mi voz es escuchada cuando hay problemas en el servicio.",
                "Fomentar el reconocimiento no solo por antigüedad sino por buen desempeño.",
                "Digitalizar los informes de seguimiento de los usuarios.",
                "Mejorar la conexión WiFi en las zonas de trabajo de los centros.",
                "El equipo humano de AVAPACE es lo mejor que tiene esta asociación.",
                "A veces hay demasiada carga de trabajo administrativo acumulada.",
                "Me encantaría tener más reuniones de coordinación con otros servicios.",
                "Sentimiento de pertenencia muy alto, me identifico con los valores.",
                "La flexibilidad horaria me ha permitido conciliar mi vida personal.",
                "Necesitamos renovar las tablets que usamos para los registros diarios.",
                "Un buzón de sugerencias real que se revise mensualmente ayudaría.",
                "Aprecio mucho la formación continua que se nos ofrece.",
                "Pangea debe ser más intuitivo para que no perdamos tanto tiempo.",
                "El ambiente entre los compañeros es inmejorable, hay mucha piña.",
                "Los materiales didácticos se quedan cortos en algunas ocasiones.",
                "Me siento valorada por mis responsables cuando el trabajo sale bien.",
                "Unificar criterios entre los diferentes centros para trabajar igual.",
                "La Misión de la entidad es lo que me mantiene ilusionada con el proyecto.",
                "Estaría bien tener más momentos de encuentro fuera del horario laboral.",
                "La agilidad burocrática es el gran reto para este año.",
                "El respeto mutuo es la base de nuestro buen clima laboral.",
                "Sentir que cuidamos a las personas con dignidad es lo más importante.",
                "Mejorar la rapidez de respuesta de los servicios centrales.",
                "La formación en gestión emocional debería ser obligatoria para todos.",
                "Poder participar en el diseño del Plan de Gestión me parece positivo.",
                "Hay que cuidar el desgaste de los profesionales que llevan mucho tiempo.",
                "El trato humano de AVAPACE marca la diferencia con otras entidades.",
                "Facilitar el acceso a la información relevante para el puesto de trabajo.",
                "Me siento muy comprometida con los objetivos de mi centro.",
                "Los procesos de acogida al personal nuevo deberían ser más estructurados.",
                "La transparencia en la comunicación interna ha mejorado este año.",
                "Necesitamos PC portátiles más modernos para las reuniones técnicas.",
                "El apoyo de los fisioterapeutas y técnicos es fundamental en mi labor.",
                "Ver la sonrisa de los usuarios compensa cualquier esfuerzo extra.",
                "Potenciar las reuniones de equipo para compartir buenas prácticas.",
                "La igualdad es real en esta casa, se nota en el trato diario.",
                "Me gustaría tener más feedback sobre mi desempeño individual.",
                "Agilizar la reposición de materiales de limpieza y mantenimiento.",
                "Sentir que formas parte de algo más grande que un simple trabajo.",
                "La cercanía de la dirección se agradece en los momentos difíciles.",
                "Optimizar el uso de las aplicaciones de gestión internas.",
                "El trabajo en equipo es nuestra mayor ventaja competitiva.",
                "Respeto total a las decisiones técnicas de los profesionales.",
                "Mejorar la señalización interna de algunos de nuestros centros.",
                "Orgullo de ser parte de la familia AVAPACE desde hace años.",
                "Los canales de comunicación oficial funcionan bien pero son lentos.",
                "Fomentar la creatividad del personal en las actividades diarias.",
                "El bienestar del trabajador repercute directamente en el usuario.",
                "Facilitar el intercambio de experiencias entre centros territoriales.",
                "Me siento motivada por el impacto social que generamos.",
                "La burocracia actual es un cuello de botella para la innovación.",
                "Gracias por respetar mi vida familiar en situaciones de urgencia.",
                "La seguridad en el puesto de trabajo está muy bien gestionada.",
                "Necesitamos una plataforma única que centralice toda la información.",
                "La pasión por lo que hacemos se contagia entre compañeros.",
                "Espero que los cambios tecnológicos se implementen con formación.",
                "El clima laboral es lo que hace que no me plantee cambiar de centro.",
                "Reforzar el equipo en horas de mayor carga de atención directa.",
                "La formación recibida este año ha sido muy útil para mi práctica.",
                "Sentirse respaldada por la organización da mucha tranquilidad.",
                "Mejorar la ventilación y climatización en algunas áreas de descanso.",
                "Apostar por el talento interno para las nuevas vacantes.",
                "La labor de AVAPACE es indispensable para nuestra sociedad.",
                "Me gusta que se nos pida opinión antes de realizar cambios importantes.",
                "Digitalizar las actas de las reuniones para que sean consultables.",
                "Fomentar los hábitos saludables también dentro del entorno laboral.",
                "El apoyo psicológico para el personal debería ser más frecuente.",
                "Agradezco la claridad en las instrucciones de mis superiores.",
                "Trabajar por la autonomía de las personas es nuestra meta común.",
                "Los turnos están bien compensados y se respetan los descansos.",
                "Falta un sistema de agradecimiento formal entre departamentos.",
                "La ética profesional es un valor muy presente en el día a día.",
                "Necesitamos PCs que no se bloqueen al abrir los informes de Pangea.",
                "El sentimiento de apoyo mutuo nos ayuda a superar días difíciles.",
                "Mejorar el flujo de información desde la sede a los centros periféricos.",
                "La igualdad de oportunidades es una realidad palpable aquí.",
                "Saber que mi esfuerzo cuenta para mejorar la vida de otros.",
                "La conciliación no es solo un lema, es una práctica real en AVAPACE.",
                "Renovar el mobiliario de algunas salas de espera y trabajo.",
                "Fomentar la cultura del agradecimiento y el refuerzo positivo.",
                "Alinear los objetivos individuales con la Misión de la entidad.",
                "Gracias por escucharnos y realizar este tipo de encuestas.",
                "Juntos hacemos que AVAPACE sea cada día un lugar mejor para todos."
            ]
        };

        const COLORS_MAP = ['#ef4444', '#f97316', '#eab308', '#84cc16', '#15803d'];

        function StatCard({ icon: IconComp, label, value, color, sub, subIsSameSize = false }) {
            return (
                <div className="premium-card p-4 flex items-center gap-3 border-l-4 border-l-[#0069b4] flex-1 min-w-[140px]">
                    <div className={`p-2 rounded-lg ${color} bg-opacity-10 text-slate-700 shrink-0`}>
                        <IconComp />
                    </div>
                    <div className="min-w-0">
                        <p className="text-[8px] font-black text-slate-400 uppercase tracking-wider truncate">{label}</p>
                        <div className="flex items-baseline gap-1.5">
                            <h3 className="text-2xl font-black text-slate-800 leading-none">{value}</h3>
                            <span className={`font-black text-slate-400 uppercase leading-none ${subIsSameSize ? 'text-2xl' : 'text-[10px]'}`}>{sub}</span>
                        </div>
                    </div>
                </div>
            );
        }

        function BlockAnalysis({ block, index }) {
            return (
                <div className="premium-card p-6 md:p-8 mb-6 break-inside-avoid shadow-sm flex flex-col">
                    <div className="flex justify-between items-start gap-4 mb-4">
                        <div className="max-w-md">
                            <div className="flex items-center gap-2 mb-1">
                                <span className="bg-[#0069b4] text-white w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-black shadow-md shrink-0 italic">0{index+1}</span>
                                <h3 className="text-lg font-bold text-slate-900 uppercase tracking-tight">{block.title}</h3>
                            </div>
                            <p className="text-slate-500 text-[11px] font-medium leading-relaxed border-l-2 border-slate-100 pl-3">{block.desc}</p>
                        </div>
                        <div className="bg-blue-50 border border-blue-100 w-12 h-12 rounded-xl flex flex-col items-center justify-center shrink-0">
                            <span className="text-base font-black text-[#0069b4] leading-none">{block.avg}</span>
                            <span className="text-[6px] font-black uppercase opacity-60 mt-0.5 tracking-widest text-center leading-none">Media</span>
                        </div>
                    </div>

                    <div className="h-[180px] mb-6 bg-slate-50 rounded-xl p-3 border border-slate-100 shadow-inner">
                        <ResponsiveContainer width="100%" height="100%">
                            <BarChart layout="vertical" data={block.data} stackOffset="expand">
                                <CartesianGrid strokeDasharray="3 3" horizontal={false} stroke="#e2e8f0" />
                                <XAxis type="number" hide />
                                <YAxis dataKey="name" type="category" width={85} axisLine={false} tickLine={false} tick={{fontSize: 9, fontWeight: 700, fill: '#64748b'}} />
                                <Tooltip cursor={{fill: 'transparent'}} />
                                <Bar name="M. Desacuerdo" dataKey="d1" stackId="a" fill={COLORS_MAP[0]} />
                                <Bar name="Desacuerdo" dataKey="d2" stackId="a" fill={COLORS_MAP[1]} />
                                <Bar name="Neutral" dataKey="d3" stackId="a" fill={COLORS_MAP[2]} />
                                <Bar name="De Acuerdo" dataKey="d4" stackId="a" fill={COLORS_MAP[3]} />
                                <Bar name="M. de Acuerdo" dataKey="d5" stackId="a" fill={COLORS_MAP[4]} radius={[0, 4, 4, 0]} />
                            </BarChart>
                        </ResponsiveContainer>
                    </div>

                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-auto">
                        <div className="bg-emerald-50/50 p-3 rounded-lg border border-emerald-100">
                            <div className="flex items-center gap-1.5 text-emerald-700 mb-1">
                                <IconCheck />
                                <span className="text-[9px] font-black uppercase tracking-widest">Fortalezas</span>
                            </div>
                            <ul className="space-y-0.5">
                                {block.strengths.map((s, i) => <li key={i} className="text-[10px] font-semibold text-slate-700 flex items-start gap-1.5 leading-tight"><div className="w-1 h-1 rounded-full bg-emerald-400 mt-1 shrink-0"/>{s}</li>)}
                            </ul>
                        </div>
                        <div className="bg-amber-50/50 p-3 rounded-lg border border-amber-100">
                            <div className="flex items-center gap-1.5 text-amber-700 mb-1">
                                <IconAlert />
                                <span className="text-[9px] font-black uppercase tracking-widest">Mejoras</span>
                            </div>
                            <ul className="space-y-0.5">
                                {block.improvements.map((im, i) => <li key={i} className="text-[10px] font-semibold text-slate-700 flex items-start gap-1.5 leading-tight"><div className="w-1 h-1 rounded-full bg-amber-400 mt-1 shrink-0"/>{im}</li>)}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        }

        function AllOpinionsView() {
            return (
                <div className="space-y-8 animate-in fade-in duration-500">
                    <div className="flex items-center gap-4 border-b-2 border-slate-100 pb-4">
                        <div className="bg-[#0069b4] p-2 rounded-lg shadow-md text-white"><IconMessage /></div>
                        <h2 className="text-xl font-black text-slate-900 uppercase tracking-tighter italic leading-none text-blue-900">Vuestra Voz: Mural de Aportaciones</h2>
                    </div>
                    
                    <div className="bg-blue-50/50 p-4 rounded-xl border border-blue-100 mb-8 no-print">
                        <p className="text-[11px] font-bold text-blue-800 uppercase tracking-widest leading-none flex items-center gap-2">
                            <IconAlert /> Espacio de escucha: Recopilación de las 101 aportaciones literales realizadas de forma anónima.
                        </p>
                    </div>

                    <div className="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">
                        {DATA.allComments.map((comment, idx) => (
                            <div key={idx} className="premium-card p-6 break-inside-avoid shadow-sm hover:scale-[1.02] transition-transform border-l-4 border-l-blue-200">
                                <div className="text-blue-100 text-4xl mb-2 italic leading-none opacity-50">“</div>
                                <p className="text-slate-700 text-[11px] italic font-semibold leading-relaxed pl-2 -mt-4">
                                    {comment}
                                </p>
                                <div className="text-blue-100 text-4xl mt-2 italic leading-none text-right opacity-50">”</div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function MainReportView({ illustration }) {
            return (
                <div className="animate-in fade-in duration-500">
                    <section className="py-8 grid grid-cols-1 lg:grid-cols-2 gap-10 items-center mb-8 border-b border-slate-100 relative">
                        <div className="space-y-6">
                            <div className="inline-flex items-center gap-3 bg-blue-50 text-[#0069b4] px-4 py-2 rounded-full border border-blue-100 shadow-sm">
                                <IconAward />
                                <span className="text-[9px] font-black uppercase tracking-widest italic text-center">Resultados del Informe</span>
                            </div>
                            <h1 className="text-4xl sm:text-5xl font-black tracking-tighter leading-[0.9] text-slate-900">
                                Vuestra voz es nuestra <span className="text-[#0069b4] italic">Misión.</span>
                            </h1>
                            <div className="premium-card p-8 border-l-[12px] border-l-[#0069b4] shadow-xl relative z-30 bg-white">
                                <p className="text-base md:text-lg text-slate-700 leading-relaxed text-justify font-medium italic">
                                    Hola equipo de Avapace, me hace mucha ilusión compartir contigo los resultados de la encuesta de satisfacción del personal. Este informe es un reflejo de vuestras voces, experiencias y del compromiso de todo el equipo. Queremos escucharte de verdad, reconocer fortalezas y encontrar oportunidades para mejorar el bienestar de esta gran familia.
                                </p>
                            </div>
                            <div className="flex flex-wrap gap-3 relative z-30">
                                <StatCard icon={IconUsers} label="Participantes" value={DATA.stats.responses} color="bg-blue-600" sub="Personas" />
                                <StatCard icon={IconHeart} label="eNPS Score" value={`+${DATA.stats.nps}`} color="bg-rose-600" sub="Lealtad" />
                                <StatCard icon={IconTrending} label="Media Real" value={DATA.stats.avg} color="bg-emerald-600" sub="/ 5.0" subIsSameSize={true} />
                            </div>
                        </div>
                        <div className="flex justify-center relative">
                            <div className="relative w-full max-w-sm h-72 sm:h-96 rounded-[3rem] shadow-2xl border-[10px] border-white transform rotate-1 z-20 overflow-hidden bg-slate-100 flex items-center justify-center">
                                <img 
                                    src={illustration} 
                                    alt="Ilustración" 
                                    className="w-full h-full object-cover" 
                                    onError={(e) => { 
                                        e.target.style.display = 'none'; 
                                        e.target.nextElementSibling.style.display = 'flex'; 
                                    }}
                                />
                                <span className="text-slate-300 font-bold uppercase tracking-widest text-xs hidden">Ilustración AVAPACE</span>
                            </div>
                            <div className="absolute -inset-10 bg-blue-400/5 rounded-full blur-3xl z-10"></div>
                        </div>
                    </section>

                    <section className="mb-12 break-inside-avoid">
                        <div className="w-full bg-[#0069b4] p-8 md:p-10 rounded-[2.5rem] shadow-xl text-white relative overflow-hidden group print-bg-blue">
                            <div className="flex flex-col md:flex-row items-center gap-10 relative z-10">
                                <div className="shrink-0 bg-white text-[#0069b4] w-32 h-32 rounded-[2rem] flex flex-col items-center justify-center shadow-2xl">
                                    <span className="text-5xl font-black italic">+{DATA.stats.nps}</span>
                                    <span className="text-[10px] font-black uppercase tracking-widest mt-1 text-center leading-none text-blue-400">eNPS<br/>Score</span>
                                </div>
                                <div className="flex-1 space-y-3">
                                    <div className="flex items-center gap-2">
                                        <div className="p-2 bg-white/10 rounded-xl"><IconHeart /></div>
                                        <h3 className="text-2xl font-black uppercase italic">Análisis de Compromiso</h3>
                                    </div>
                                    <p className="text-base md:text-lg leading-relaxed font-semibold text-white text-justify">
                                        Un resultado de <strong className="text-white underline decoration-rose-400 decoration-4 underline-offset-4">+{DATA.stats.nps}</strong> es excepcional. Pone en valor el altísimo nivel de <strong className="text-white">lealtad</strong> y <strong className="text-white">orgullo</strong> que sentimos por pertenecer a Avapace. Supone que somos un equipo de <strong className="text-white italic">embajadores</strong> comprometidos con la misión.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* SECCIÓN I. CUANTITATIVO */}
                    <section className="mb-16">
                        <div className="flex items-center gap-4 mb-8 border-b-2 border-slate-100 pb-4">
                            <div className="bg-white p-2 rounded-lg shadow-md border border-slate-100 text-[#0069b4]"><IconAward /></div>
                            <h2 className="text-xl font-black text-slate-900 uppercase tracking-tighter italic leading-none text-blue-900">I. Análisis Cuantitativo</h2>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {DATA.blocks.map((block, i) => <BlockAnalysis key={i} block={block} index={i} />)}
                        </div>
                    </section>

                    {/* SECCIÓN II. CUALITATIVO */}
                    <section className="mb-16 space-y-10">
                        <div className="flex items-center gap-4 border-b-2 border-slate-100 pb-4">
                            <div className="bg-slate-900 p-2 rounded-lg shadow-md text-white"><IconMessage /></div>
                            <h2 className="text-xl font-black text-slate-900 uppercase tracking-tighter italic leading-none text-blue-900">II. Resumen Cualitativo</h2>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            {DATA.qualitative.map((item, idx) => (
                                <div key={idx} className="premium-card overflow-hidden flex flex-col border-l-8 border-l-slate-900 shadow-md break-inside-avoid">
                                    <div className="p-5 bg-slate-50 border-b border-slate-100 flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <div className="w-8 h-8 rounded-lg bg-[#0069b4] flex items-center justify-center text-xs font-black text-white shadow-sm italic">Q{idx+1}</div>
                                            <h4 className="text-base font-black text-slate-900 uppercase italic truncate">{item.title}</h4>
                                        </div>
                                        <div className="text-blue-500 animate-pulse no-print"><IconZap /></div>
                                    </div>
                                    <div className="p-6 space-y-6 flex-1 bg-white">
                                        <p className="text-base text-slate-700 leading-relaxed font-bold italic border-l-4 border-blue-500 pl-4">{item.summary}</p>
                                        <div className="space-y-3">
                                            <p className="text-[8px] font-black text-slate-400 uppercase tracking-widest border-b pb-1">Voces del equipo</p>
                                            <div className="space-y-2">
                                                {item.quotes.map((quote, qIdx) => (
                                                    <div key={qIdx} className="bg-slate-50 p-3 rounded-lg text-[11px] italic text-slate-600 border border-slate-100 relative">
                                                        <span className="text-blue-200 text-2xl absolute -top-1 left-1 pointer-events-none opacity-50 italic leading-none">“</span>
                                                        <p className="pl-4 leading-snug">"{quote}"</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="space-y-2 mt-auto pt-4 border-t border-slate-100">
                                            <p className="text-[8px] font-black text-slate-400 uppercase tracking-widest text-[#0069b4]">Líneas de actuación priorizadas</p>
                                            <div className="grid gap-1.5">
                                                {item.actions.map((act, i) => (
                                                    <div key={i} className="flex items-center gap-2.5 bg-blue-50/50 p-2 rounded-lg text-[10px] font-black border border-blue-100 text-blue-900">
                                                        <IconZap /><span className="uppercase tracking-tighter">{act}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </section>

                    {/* SECCIÓN III. RESUMEN EJECUTIVO */}
                    <section className="mb-16 space-y-8">
                        <div className="flex items-center gap-4 border-b-2 border-slate-100 pb-4">
                            <div className="bg-emerald-600 p-2 rounded-lg shadow-md text-white"><IconStar /></div>
                            <h2 className="text-xl font-black text-slate-900 uppercase tracking-tighter italic leading-none text-blue-900">III. Resumen Ejecutivo: Fortalezas, Mejoras y Retos</h2>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div className="premium-card p-6 border-t-8 border-t-emerald-500 shadow-lg break-inside-avoid">
                                <div className="flex items-center gap-3 mb-6 text-emerald-700">
                                    <IconAward />
                                    <h4 className="font-black uppercase tracking-widest text-sm">Fortalezas</h4>
                                </div>
                                <ul className="space-y-4">
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-emerald-400 mt-1 shrink-0" />
                                        Compromiso absoluto con la Misión y Valores sociales.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-emerald-400 mt-1 shrink-0" />
                                        Clima de respeto y apoyo mutuo entre compañeros/as.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-emerald-400 mt-1 shrink-0" />
                                        Cercanía y trato humano por parte de los responsables directos.
                                    </li>
                                </ul>
                            </div>
                            <div className="premium-card p-6 border-t-8 border-t-amber-500 shadow-lg break-inside-avoid">
                                <div className="flex items-center gap-3 mb-6 text-amber-700">
                                    <IconTarget />
                                    <h4 className="font-black uppercase tracking-widest text-sm">Propuestas de Mejora</h4>
                                </div>
                                <ul className="space-y-4">
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-amber-400 mt-1 shrink-0" />
                                        Digitalización de procesos para agilizar la carga burocrática.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-amber-400 mt-1 shrink-0" />
                                        Renovación planificada de dispositivos TIC y mejora de redes.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-amber-400 mt-1 shrink-0" />
                                        Sistematización del feedback formal y reconocimiento individual.
                                    </li>
                                </ul>
                            </div>
                            <div className="premium-card p-6 border-t-8 border-t-blue-500 shadow-lg break-inside-avoid">
                                <div className="flex items-center gap-3 mb-6 text-blue-700">
                                    <IconTrending />
                                    <h4 className="font-black uppercase tracking-widest text-sm">Retos Estratégicos</h4>
                                </div>
                                <ul className="space-y-4">
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-blue-400 mt-1 shrink-0" />
                                        Cuidar a quienes cuidan: Gestión proactiva de la carga emocional.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-blue-400 mt-1 shrink-0" />
                                        Fomentar la cohesión inter-centros en una organización creciente.
                                    </li>
                                    <li className="flex items-start gap-3 text-xs font-bold text-slate-700">
                                        <div className="w-2 h-2 rounded-full bg-blue-400 mt-1 shrink-0" />
                                        Implementar cambios tecnológicos sin perder la cercanía humana.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    {/* SECCIÓN IV. HOJA DE RUTA */}
                    <section className="mb-16">
                        <div className="premium-card p-10 relative overflow-hidden border-t-8 border-t-[#0069b4] shadow-xl bg-white">
                            <div className="flex items-center gap-4 mb-8 relative z-10">
                                <div className="bg-[#0069b4] p-3 rounded-xl shadow-lg text-white shrink-0"><IconTarget /></div>
                                <h2 className="text-xl font-black text-slate-900 uppercase tracking-tighter italic leading-tight text-blue-900">IV. Hoja de Ruta: Plan de Gestión 2026</h2>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10">
                                {[
                                    { t: "Digitalización Integral", d: "Implementación de PANGEA como plataforma de gestión centralizada para la eliminación de registros en papel y optimización del tiempo de atención." },
                                    { t: "Bienestar Emocional", d: "Evaluación de Riesgos Psicosociales con frecuencia anual; esta acción garantiza que somos una organización emocionalmente responsable con su equipo." },
                                    { 
                                        t: "Cultura de Valoración", 
                                        d: "queremos que cada persona se sienta valorada por su dedicación diaria, reconociendo el corazón y la implicación que poneis en cada acompañamiento. Propuestas:\n_ Espacios de agradecimiento compartido para poner en valor el apoyo mútuo del día a día.\n_ Conversaciones de desarrollo constructivas y cercanas, centradas en las fortalezas y en vuestro sentimiento en el equipo." 
                                    }
                                ].map((obj, idx) => (
                                    <div key={idx} className="group p-5 rounded-2xl bg-slate-50 border-2 border-slate-100 space-y-3 transition-all hover:bg-white hover:shadow-md">
                                        <div className="w-8 h-8 bg-white rounded-lg flex items-center justify-center shadow-md text-base font-black text-[#0069b4] italic border border-slate-100 group-hover:bg-[#0069b4] group-hover:text-white transition-all">{idx + 1}</div>
                                        <div className="space-y-1">
                                            <h4 className="text-sm font-black text-slate-900 uppercase italic leading-tight">{obj.t}</h4>
                                            <p className="text-[11px] text-slate-500 font-bold leading-relaxed whitespace-pre-line">{obj.d}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>
                </div>
            );
        }

        function App() {
            const [activeTab, setActiveTab] = useState('informe');
            // Rutas relativas explícitas para GitHub Pages
            const [logo, setLogo] = useState('./logo-avapace.png');
            const [illustration, setIllustration] = useState('./dibujo-avapace-960.png');
            const [isEditor, setIsEditor] = useState(false);
            
            const logoInputRef = useRef(null);
            const illustrationInputRef = useRef(null);

            const handleEditorLogin = () => {
                if (isEditor) {
                    setIsEditor(false);
                    return;
                }
                const pass = prompt("Introduce la clave de editora:");
                if (pass === "2026Avapace2026") {
                    setIsEditor(true);
                } else if (pass !== null) {
                    alert("Clave incorrecta.");
                }
            };

            const handleFileChange = (e, setter) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => setter(event.target.result);
                    reader.readAsDataURL(file);
                }
            };

            return (
                <div className="max-w-7xl mx-auto px-4 sm:px-6 pb-20">
                    <header className="bg-white/80 backdrop-blur-md sticky top-0 z-50 px-6 flex flex-col sm:flex-row items-center justify-between border-b border-slate-200 rounded-b-xl shadow-sm mb-6">
                        <div className="flex items-center gap-4 h-16">
                            <div className="flex items-center">
                                <img 
                                    src={logo} 
                                    alt="Logo" 
                                    className="h-10 w-auto object-contain" 
                                    onError={(e) => { 
                                        e.target.style.display = 'none'; 
                                        e.target.nextElementSibling.style.display = 'flex'; 
                                    }}
                                />
                                <div className="h-10 w-24 bg-slate-100 rounded items-center justify-center border-2 border-dashed border-slate-200 no-print hidden">
                                    <span className="text-[8px] font-black text-slate-400 uppercase">Logo</span>
                                </div>
                            </div>
                            
                            <div className="h-6 w-px bg-slate-200 hidden sm:block" />
                            
                            <div className="flex items-center gap-2 no-print">
                                <button 
                                    onClick={handleEditorLogin}
                                    className={`p-2 rounded-lg transition-all ${isEditor ? 'bg-blue-600 text-white shadow-md' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}
                                    title={isEditor ? "Cerrar sesión de editora" : "Acceso Editora"}
                                >
                                    <IconLock />
                                </button>
                                
                                {isEditor && (
                                    <div className="flex items-center gap-2 animate-in slide-in-from-left duration-300">
                                        <button 
                                            onClick={() => logoInputRef.current.click()}
                                            className="bg-[#0069b4] hover:bg-blue-700 text-white px-2 py-1.5 rounded text-[8px] font-black uppercase flex items-center gap-1 transition-colors shadow-sm"
                                        >
                                            <IconUpload /> Logo
                                        </button>
                                        <button 
                                            onClick={() => illustrationInputRef.current.click()}
                                            className="bg-[#0069b4] hover:bg-blue-700 text-white px-2 py-1.5 rounded text-[8px] font-black uppercase flex items-center gap-1 transition-colors shadow-sm"
                                        >
                                            <IconUpload /> Ilustra
                                        </button>
                                    </div>
                                )}
                                
                                <input type="file" ref={logoInputRef} className="hidden" accept="image/*" onChange={(e) => handleFileChange(e, setLogo)} />
                                <input type="file" ref={illustrationInputRef} className="hidden" accept="image/*" onChange={(e) => handleFileChange(e, setIllustration)} />
                            </div>
                            <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest hidden sm:block">Informe 2025</span>
                        </div>
                        
                        <div className="flex items-center gap-8 h-16 no-print">
                            <button 
                                onClick={() => setActiveTab('informe')}
                                className={`h-full px-2 text-[10px] font-black uppercase tracking-[0.2em] transition-all ${activeTab === 'informe' ? 'tab-active' : 'text-slate-400'}`}
                            >
                                Informe General
                            </button>
                            <button 
                                onClick={() => setActiveTab('opiniones')}
                                className={`h-full px-2 text-[10px] font-black uppercase tracking-[0.2em] transition-all ${activeTab === 'opiniones' ? 'tab-active' : 'text-slate-400'}`}
                            >
                                Vuestra Voz
                            </button>
                        </div>

                        <button 
                            onClick={() => window.print()} 
                            className="bg-[#0069b4] text-white px-5 py-2 rounded-lg flex items-center gap-3 font-black text-[10px] uppercase tracking-widest shadow-md active:scale-95 transition-all mb-4 sm:mb-0 no-print"
                        >
                            <IconPrinter /> PDF
                        </button>
                    </header>

                    {activeTab === 'informe' ? (
                        <MainReportView illustration={illustration} />
                    ) : (
                        <AllOpinionsView />
                    )}

                    <footer className="py-12 border-t-4 border-slate-100 flex flex-col items-center gap-6 opacity-70">
                        <div className="flex flex-col sm:flex-row items-center gap-6">
                            <div className="bg-[#0069b4] w-8 h-8 rounded-lg flex items-center justify-center text-white font-black italic shadow-lg text-base leading-none">A</div>
                            <div className="flex items-center">
                                <img 
                                    src={logo} 
                                    alt="Logo footer" 
                                    className="h-6 w-auto grayscale opacity-50" 
                                    onError={(e) => { 
                                        e.target.style.display = 'none'; 
                                        e.target.nextElementSibling.style.display = 'block'; 
                                    }}
                                />
                                <span className="text-xl font-black text-slate-300 uppercase tracking-widest italic leading-none hidden">AVAPACE</span>
                            </div>
                            <div className="h-4 w-px bg-slate-300 hidden sm:block" />
                            <span className="text-xl font-black text-slate-300 uppercase tracking-widest italic leading-none">2025</span>
                        </div>
                        <p className="text-[10px] font-black text-[#0069b4] uppercase tracking-[0.4em] text-center italic opacity-60">Escucha Activa • Impacto Real • Misión Compartida</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
